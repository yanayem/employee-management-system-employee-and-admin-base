{% load static %}
<!DOCTYPE html>
<html lang="en" class="light">
<head>
    <meta charset="UTF-8">
    <title>Payroll Management</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="{% static 'css/theme.css' %}">
    <script>
      // Enable Tailwind class-based dark mode
      tailwind.config = { darkMode: "class" };
    </script>
</head>

<body class="bg-gray-100 dark:bg-blue-900 text-gray-900 dark:text-gray-100">

<!-- Sidebar + Topbar -->
{% include 'adminsidetopbar.html' %}

<div class="ml-64 mt-16 p-6">

    <!-- Header Row -->
    <div class="flex justify-between items-center mb-6">
        <h1 class="text-3xl font-bold">Payroll Management</h1>

        <a href="{% url 'admin_payroll_add' %}"
           class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">
            + Add Payroll
        </a>
    </div>

    <!-- Table Container -->
    <div class="bg-white dark:bg-blue-800 p-6 rounded shadow overflow-auto">

        <table class="w-full border-collapse">
            <thead>
                <tr class="bg-gray-200 dark:bg-blue-700 text-left">
                    <th class="p-3">Employee</th>
                    <th class="p-3">Employee ID</th>
                    <th class="p-3">Month</th>
                    <th class="p-3">Gross Salary</th>
                    <th class="p-3">Deductions</th>
                    <th class="p-3">Net Pay</th>
                    <th class="p-3 text-center">Actions</th>
                </tr>
            </thead>

            <tbody>
                {% for pay in payrolls %}
                <tr class="border-b border-gray-300 dark:border-blue-600 hover:bg-gray-100 dark:hover:bg-blue-700">

                    <td class="p-3">{{ pay.employee.full_name }}</td>

                    <td class="p-3">{{ pay.employee.employee_id }}</td>

                    <td class="p-3">
                        {{ pay.month|date:"F Y" }}
                    </td>

                    <td class="p-3">{{ pay.gross_salary }}</td>

                    <td class="p-3">{{ pay.deductions }}</td>

                    <td class="p-3 font-semibold">{{ pay.net_pay }}</td>

                    <td class="p-3 flex gap-2 justify-center">

                        <!-- Edit -->
                        <a href="{% url 'admin_payroll_edit' pay.id %}"
                           class="px-3 py-1 rounded bg-yellow-500 text-white hover:bg-yellow-600">
                            Edit
                        </a>

                        <!-- Slip -->
                        <a href="{% url 'admin_payroll_slip' pay.id %}"
                           class="px-3 py-1 rounded bg-green-600 text-white hover:bg-green-700">
                            Slip
                        </a>

                        <!-- Delete -->
                        <a href="{% url 'admin_payroll_delete' pay.id %}"
                           onclick="return confirm('Are you sure you want to delete this payroll record?');"
                           class="px-3 py-1 rounded bg-red-600 text-white hover:bg-red-700">
                            Delete
                        </a>

                    </td>
                </tr>

                {% empty %}
                <tr>
                    <td colspan="7" class="text-center p-4 text-gray-500 dark:text-gray-300">
                        No payroll records found.
                    </td>
                </tr>
                {% endfor %}
            </tbody>

        </table>
    </div>

</div>

</body>
</html>
