{% load static %}
<!DOCTYPE html>
<html lang="en" class="light">
<head>
    <meta charset="UTF-8">
    <title>HR Admin Projects</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="{% static 'css/theme.css' %}">
    <script>
      // Enable Tailwind class-based dark mode
      tailwind.config = { darkMode: "class" };
    </script>
</head>
<body class="bg-gray-100 dark:bg-gray-900 text-gray-800 dark:text-gray-100 font-sans transition-colors duration-300">

{% include 'adminsidetopbar.html' %}

<div class="ml-64 mt-16 p-6">

    <!-- Stats Cards -->
    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-6 mb-8">
        {% for stat in project_stats %}
        <div class="bg-white/50 dark:bg-gray-800/50 p-4 rounded-xl shadow-md hover:shadow-lg transition backdrop-blur-sm flex items-center space-x-4">
            <div class="{{ stat.icon_bg }} p-3 rounded-full">
                <i class="{{ stat.icon }} {{ stat.icon_color }} text-xl"></i>
            </div>
            <div>
                <p class="text-gray-700 dark:text-gray-200 font-medium">{{ stat.label }}</p>
                <p class="text-2xl font-bold text-gray-900 dark:text-gray-100">{{ stat.value }}</p>
            </div>
        </div>
        {% endfor %}
    </div>

    <!-- Add Project Button -->
    <div class="mb-6 flex justify-end">
        <a href="{% url 'admin_project_add' %}" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded transition">Add Project</a>
    </div>

    <!-- Project List -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        {% for project in projects %}
        <div class="bg-white/50 dark:bg-gray-800/50 p-4 rounded-xl shadow-md hover:shadow-lg transition backdrop-blur-sm">
            <div class="flex justify-between items-center mb-2">
                <h3 class="font-bold text-lg text-gray-800 dark:text-gray-100">{{ project.title }}</h3>
                <span class="px-2 py-1 rounded text-sm {{ project.priority|lower|yesno:'bg-red-100 bg-yellow-100 bg-green-100' }} dark:bg-gray-700">{{ project.priority }}</span>
            </div>
            <p class="text-gray-600 dark:text-gray-300 text-sm mb-2">{{ project.description|truncatechars:80 }}</p>
            <p class="text-sm text-gray-500 dark:text-gray-400">Assigned to: {{ project.assigned_to.full_name }}</p>
            <p class="text-sm text-gray-500 dark:text-gray-400">Status: {{ project.status }}</p>
            <p class="text-sm text-gray-500 dark:text-gray-400">Progress: {{ project.progress }}%</p>
            <div class="mt-3 flex space-x-2">
                <a href="{% url 'admin_project_detail' project.id %}" class="text-blue-600 hover:underline">View</a>
                <a href="{% url 'admin_project_edit' project.id %}" class="text-green-600 hover:underline">Edit</a>
                <a href="{% url 'admin_project_delete' project.id %}" class="text-red-600 hover:underline">Delete</a>
            </div>
        </div>
        {% empty %}
        <p class="text-gray-500 dark:text-gray-300">No projects found.</p>
        {% endfor %}
    </div>
  </div>

<script>
    // Dark/Light toggle
    const toggle = document.getElementById('theme-toggle');
    toggle.addEventListener('click', () => {
        document.documentElement.classList.toggle('dark');
    });
</script>

</body>
</html>
